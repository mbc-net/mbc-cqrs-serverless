{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.200.1"},"children":{"McpHostStack":{"id":"McpHostStack","path":"McpHostStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.200.1"},"children":{"McpCluster":{"id":"McpCluster","path":"McpHostStack/McpCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"dev-mcp-mcp-cluster","clusterSettings":[{"name":"containerInsights","value":"enabled"}]}}},"Vpc":{"id":"Vpc","path":"McpHostStack/McpCluster/Vpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpCluster/Vpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"McpHostStack/McpCluster/Vpc/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.200.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"McpHostStack/McpCluster/Vpc/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PublicSubnet1"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"Acl":{"id":"Acl","path":"McpHostStack/McpCluster/Vpc/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"McpHostStack/McpCluster/Vpc/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PublicSubnet1"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"McpHostStack/McpCluster/Vpc/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"McpClusterVpcPublicSubnet1RouteTable8EE6734A"},"subnetId":{"Ref":"McpClusterVpcPublicSubnet1Subnet8EC920C6"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"McpHostStack/McpCluster/Vpc/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"McpClusterVpcIGW22FCE8E2"},"routeTableId":{"Ref":"McpClusterVpcPublicSubnet1RouteTable8EE6734A"}}}},"EIP":{"id":"EIP","path":"McpHostStack/McpCluster/Vpc/PublicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PublicSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"McpHostStack/McpCluster/Vpc/PublicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["McpClusterVpcPublicSubnet1EIP0E4FC36C","AllocationId"]},"subnetId":{"Ref":"McpClusterVpcPublicSubnet1Subnet8EC920C6"},"tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PublicSubnet1"}]}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"McpHostStack/McpCluster/Vpc/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.200.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"McpHostStack/McpCluster/Vpc/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PublicSubnet2"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"Acl":{"id":"Acl","path":"McpHostStack/McpCluster/Vpc/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"McpHostStack/McpCluster/Vpc/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PublicSubnet2"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"McpHostStack/McpCluster/Vpc/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"McpClusterVpcPublicSubnet2RouteTable8DA64EAD"},"subnetId":{"Ref":"McpClusterVpcPublicSubnet2Subnet60BEC3C0"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"McpHostStack/McpCluster/Vpc/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"McpClusterVpcIGW22FCE8E2"},"routeTableId":{"Ref":"McpClusterVpcPublicSubnet2RouteTable8DA64EAD"}}}},"EIP":{"id":"EIP","path":"McpHostStack/McpCluster/Vpc/PublicSubnet2/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PublicSubnet2"}]}}},"NATGateway":{"id":"NATGateway","path":"McpHostStack/McpCluster/Vpc/PublicSubnet2/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["McpClusterVpcPublicSubnet2EIP3264D470","AllocationId"]},"subnetId":{"Ref":"McpClusterVpcPublicSubnet2Subnet60BEC3C0"},"tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PublicSubnet2"}]}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.200.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PrivateSubnet1"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"Acl":{"id":"Acl","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PrivateSubnet1"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"McpClusterVpcPrivateSubnet1RouteTable31A88389"},"subnetId":{"Ref":"McpClusterVpcPrivateSubnet1Subnet85846000"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"McpClusterVpcPublicSubnet1NATGateway92A0FF33"},"routeTableId":{"Ref":"McpClusterVpcPrivateSubnet1RouteTable31A88389"}}}}}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.200.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PrivateSubnet2"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"Acl":{"id":"Acl","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc/PrivateSubnet2"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"McpClusterVpcPrivateSubnet2RouteTable2684471D"},"subnetId":{"Ref":"McpClusterVpcPrivateSubnet2Subnet608B7954"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"McpHostStack/McpCluster/Vpc/PrivateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"McpClusterVpcPublicSubnet2NATGateway4652FD10"},"routeTableId":{"Ref":"McpClusterVpcPrivateSubnet2RouteTable2684471D"}}}}}},"IGW":{"id":"IGW","path":"McpHostStack/McpCluster/Vpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"McpHostStack/McpCluster/Vpc"}]}}},"VPCGW":{"id":"VPCGW","path":"McpHostStack/McpCluster/Vpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"McpClusterVpcIGW22FCE8E2"},"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"McpHostStack/McpCluster/Vpc/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.200.1","metadata":[]},"children":{"Default":{"id":"Default","path":"McpHostStack/McpCluster/Vpc/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.200.1"}}}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"McpHostStack/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.200.1"},"children":{"Staging":{"id":"Staging","path":"McpHostStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.200.1"}},"Role":{"id":"Role","path":"McpHostStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.200.1"}},"Handler":{"id":"Handler","path":"McpHostStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.200.1"}}}},"McpServerLogGroup":{"id":"McpServerLogGroup","path":"McpHostStack/McpServerLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpServerLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/ecs/dev-mcp-mcp-server","retentionInDays":30}}}}},"McpHostLogGroup":{"id":"McpHostLogGroup","path":"McpHostStack/McpHostLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/ecs/dev-mcp-mcp-host","retentionInDays":30}}}}},"McpServerTaskRole":{"id":"McpServerTaskRole","path":"McpHostStack/McpServerTaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.200.1","metadata":[]},"children":{"ImportMcpServerTaskRole":{"id":"ImportMcpServerTaskRole","path":"McpHostStack/McpServerTaskRole/ImportMcpServerTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"Resource":{"id":"Resource","path":"McpHostStack/McpServerTaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"McpHostStack/McpServerTaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpServerTaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cloudwatch:GetMetricStatistics","cloudwatch:ListMetrics","kms:Decrypt","logs:CreateLogGroup","logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:GetQueryResults","logs:PutLogEvents","logs:StartQuery","rds:DescribeDBClusters","rds:DescribeDBInstances","ssm:GetParameter","ssm:GetParameters"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:dynamodb:us-east-1:",{"Ref":"AWS::AccountId"},":table/dev-mcp*"]]}}],"Version":"2012-10-17"},"policyName":"McpServerTaskRoleDefaultPolicy8E624EA6","roles":[{"Ref":"McpServerTaskRoleB19E5A08"}]}}}}}}},"McpServerService":{"id":"McpServerService","path":"McpHostStack/McpServerService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs_patterns.ApplicationLoadBalancedFargateService","version":"2.200.1"},"children":{"LB":{"id":"LB","path":"McpHostStack/McpServerService/LB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpServerService/LB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internal","securityGroups":[{"Fn::GetAtt":["McpServerServiceLBSecurityGroup3AEE1922","GroupId"]}],"subnets":[{"Ref":"McpClusterVpcPrivateSubnet1Subnet85846000"},{"Ref":"McpClusterVpcPrivateSubnet2Subnet608B7954"}],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"McpHostStack/McpServerService/LB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpServerService/LB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB McpHostStackMcpServerServiceLBC84F322F","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":8000,"toPort":8000,"description":"Allow from anyone on port 8000"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"to McpHostStackMcpServerServiceSecurityGroup45F3E613:8000":{"id":"to McpHostStackMcpServerServiceSecurityGroup45F3E613:8000","path":"McpHostStack/McpServerService/LB/SecurityGroup/to McpHostStackMcpServerServiceSecurityGroup45F3E613:8000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["McpServerServiceSecurityGroupCBA9C12E","GroupId"]},"fromPort":8000,"groupId":{"Fn::GetAtt":["McpServerServiceLBSecurityGroup3AEE1922","GroupId"]},"ipProtocol":"tcp","toPort":8000}}}}},"PublicListener":{"id":"PublicListener","path":"McpHostStack/McpServerService/LB/PublicListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpServerService/LB/PublicListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"McpServerServiceLBPublicListenerECSGroupE6875F13"}}],"loadBalancerArn":{"Ref":"McpServerServiceLB8C38DADE"},"port":8000,"protocol":"HTTP"}}},"ECSGroup":{"id":"ECSGroup","path":"McpHostStack/McpServerService/LB/PublicListener/ECSGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.200.1"},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpServerService/LB/PublicListener/ECSGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"McpClusterVpc02532540"}}}}}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"McpHostStack/McpServerService/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.200.1"}},"ServiceURL":{"id":"ServiceURL","path":"McpHostStack/McpServerService/ServiceURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.200.1"}},"TaskDef":{"id":"TaskDef","path":"McpHostStack/McpServerService/TaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpServerService/TaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Sub":"${AWS::AccountId}.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-us-east-1:777d73f2803444ac7ffeab2f3f312152f3eb661e02b64e3d3af1fb4efd3a68ff"},"name":"web","portMappings":[{"containerPort":8000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"McpServerLogGroup7FAD27A8"},"awslogs-stream-prefix":"mcp-server","awslogs-region":"us-east-1"}},"environment":[{"name":"PORT","value":"8000"},{"name":"AWS_REGION","value":"us-east-1"},{"name":"NODE_ENV","value":"production"},{"name":"APP_NAME","value":"dev-mcp"}]}],"cpu":"512","executionRoleArn":{"Fn::GetAtt":["McpServerServiceTaskDefExecutionRole24832816","Arn"]},"family":"McpHostStackMcpServerServiceTaskDef44C7F193","memory":"1024","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["McpServerTaskRoleB19E5A08","Arn"]}}}},"web":{"id":"web","path":"McpHostStack/McpServerService/TaskDef/web","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.200.1"},"children":{"AssetImage":{"id":"AssetImage","path":"McpHostStack/McpServerService/TaskDef/web/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.200.1"},"children":{"Staging":{"id":"Staging","path":"McpHostStack/McpServerService/TaskDef/web/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.200.1"}},"Repository":{"id":"Repository","path":"McpHostStack/McpServerService/TaskDef/web/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.200.1","metadata":[]}}}}}},"ExecutionRole":{"id":"ExecutionRole","path":"McpHostStack/McpServerService/TaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.200.1","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"McpHostStack/McpServerService/TaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"Resource":{"id":"Resource","path":"McpHostStack/McpServerService/TaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"McpHostStack/McpServerService/TaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpServerService/TaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:ecr:us-east-1:",{"Ref":"AWS::AccountId"},":repository/",{"Fn::Sub":"cdk-hnb659fds-container-assets-${AWS::AccountId}-us-east-1"}]]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["McpServerLogGroup7FAD27A8","Arn"]}}],"Version":"2012-10-17"},"policyName":"McpServerServiceTaskDefExecutionRoleDefaultPolicy2DA2A901","roles":[{"Ref":"McpServerServiceTaskDefExecutionRole24832816"}]}}}}}}}}},"Service":{"id":"Service","path":"McpHostStack/McpServerService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.200.1","metadata":[]},"children":{"Service":{"id":"Service","path":"McpHostStack/McpServerService/Service/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"McpCluster0CEA2FB6"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"McpServerServiceLBPublicListenerECSGroupE6875F13"},"containerName":"web","containerPort":8000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"McpClusterVpcPrivateSubnet1Subnet85846000"},{"Ref":"McpClusterVpcPrivateSubnet2Subnet608B7954"}],"securityGroups":[{"Fn::GetAtt":["McpServerServiceSecurityGroupCBA9C12E","GroupId"]}]}},"serviceName":"dev-mcp-mcp-server","taskDefinition":{"Ref":"McpServerServiceTaskDefC29C887B"}}}},"SecurityGroup":{"id":"SecurityGroup","path":"McpHostStack/McpServerService/Service/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpServerService/Service/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"McpHostStack/McpServerService/Service/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"from McpHostStackMcpServerServiceLBSecurityGroup269F51AB:8000":{"id":"from McpHostStackMcpServerServiceLBSecurityGroup269F51AB:8000","path":"McpHostStack/McpServerService/Service/SecurityGroup/from McpHostStackMcpServerServiceLBSecurityGroup269F51AB:8000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":8000,"groupId":{"Fn::GetAtt":["McpServerServiceSecurityGroupCBA9C12E","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["McpServerServiceLBSecurityGroup3AEE1922","GroupId"]},"toPort":8000}}}}}}}}},"McpHostTaskRole":{"id":"McpHostTaskRole","path":"McpHostStack/McpHostTaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.200.1","metadata":[]},"children":{"ImportMcpHostTaskRole":{"id":"ImportMcpHostTaskRole","path":"McpHostStack/McpHostTaskRole/ImportMcpHostTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"Resource":{"id":"Resource","path":"McpHostStack/McpHostTaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"]]}]}}}}},"ClaudeApiKeyParam.Parameter":{"id":"ClaudeApiKeyParam.Parameter","path":"McpHostStack/ClaudeApiKeyParam.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.200.1"}},"ClaudeApiKeyParam":{"id":"ClaudeApiKeyParam","path":"McpHostStack/ClaudeApiKeyParam","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"McpHostService":{"id":"McpHostService","path":"McpHostStack/McpHostService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs_patterns.ApplicationLoadBalancedFargateService","version":"2.200.1"},"children":{"LB":{"id":"LB","path":"McpHostStack/McpHostService/LB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostService/LB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["McpHostServiceLBSecurityGroupB5C58556","GroupId"]}],"subnets":[{"Ref":"McpClusterVpcPublicSubnet1Subnet8EC920C6"},{"Ref":"McpClusterVpcPublicSubnet2Subnet60BEC3C0"}],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"McpHostStack/McpHostService/LB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostService/LB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB McpHostStackMcpHostServiceLB0CEB8D3C","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"to McpHostStackMcpHostServiceSecurityGroup28304193:3000":{"id":"to McpHostStackMcpHostServiceSecurityGroup28304193:3000","path":"McpHostStack/McpHostService/LB/SecurityGroup/to McpHostStackMcpHostServiceSecurityGroup28304193:3000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["McpHostServiceSecurityGroup6D76FFA5","GroupId"]},"fromPort":3000,"groupId":{"Fn::GetAtt":["McpHostServiceLBSecurityGroupB5C58556","GroupId"]},"ipProtocol":"tcp","toPort":3000}}}}},"PublicListener":{"id":"PublicListener","path":"McpHostStack/McpHostService/LB/PublicListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostService/LB/PublicListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"McpHostServiceLBPublicListenerECSGroupE0964117"}}],"loadBalancerArn":{"Ref":"McpHostServiceLB59748D70"},"port":80,"protocol":"HTTP"}}},"ECSGroup":{"id":"ECSGroup","path":"McpHostStack/McpHostService/LB/PublicListener/ECSGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.200.1"},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostService/LB/PublicListener/ECSGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"McpClusterVpc02532540"}}}}}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"McpHostStack/McpHostService/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.200.1"}},"ServiceURL":{"id":"ServiceURL","path":"McpHostStack/McpHostService/ServiceURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.200.1"}},"TaskDef":{"id":"TaskDef","path":"McpHostStack/McpHostService/TaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostService/TaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Sub":"${AWS::AccountId}.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-us-east-1:81a9fb7b5e6a8ce58cf4725bb3545f5fb77dd4c7018135e225299b154dfd3a06"},"name":"web","portMappings":[{"containerPort":3000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"McpHostLogGroupB24D02B1"},"awslogs-stream-prefix":"mcp-host","awslogs-region":"us-east-1"}},"environment":[{"name":"PORT","value":"3000"},{"name":"NODE_ENV","value":"production"},{"name":"MCP_SERVER_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["McpServerServiceLB8C38DADE","DNSName"]},":8000"]]}}],"secrets":[{"name":"CLAUDE_API_KEY","valueFrom":{"Fn::Join":["",["arn:aws:ssm:us-east-1:",{"Ref":"AWS::AccountId"},":parameter/mcp/claude-api-key"]]}}]}],"cpu":"512","executionRoleArn":{"Fn::GetAtt":["McpHostServiceTaskDefExecutionRoleA4B39654","Arn"]},"family":"McpHostStackMcpHostServiceTaskDef26105505","memory":"1024","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["McpHostTaskRoleF62D4C67","Arn"]}}}},"web":{"id":"web","path":"McpHostStack/McpHostService/TaskDef/web","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.200.1"},"children":{"AssetImage":{"id":"AssetImage","path":"McpHostStack/McpHostService/TaskDef/web/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.200.1"},"children":{"Staging":{"id":"Staging","path":"McpHostStack/McpHostService/TaskDef/web/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.200.1"}},"Repository":{"id":"Repository","path":"McpHostStack/McpHostService/TaskDef/web/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.200.1","metadata":[]}}}}}},"ExecutionRole":{"id":"ExecutionRole","path":"McpHostStack/McpHostService/TaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.200.1","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"McpHostStack/McpHostService/TaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"Resource":{"id":"Resource","path":"McpHostStack/McpHostService/TaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"McpHostStack/McpHostService/TaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostService/TaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:ecr:us-east-1:",{"Ref":"AWS::AccountId"},":repository/",{"Fn::Sub":"cdk-hnb659fds-container-assets-${AWS::AccountId}-us-east-1"}]]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["McpHostLogGroupB24D02B1","Arn"]}},{"Action":["ssm:DescribeParameters","ssm:GetParameter","ssm:GetParameterHistory","ssm:GetParameters"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:ssm:us-east-1:",{"Ref":"AWS::AccountId"},":parameter/mcp/claude-api-key"]]}}],"Version":"2012-10-17"},"policyName":"McpHostServiceTaskDefExecutionRoleDefaultPolicy10888498","roles":[{"Ref":"McpHostServiceTaskDefExecutionRoleA4B39654"}]}}}}}}}}},"Service":{"id":"Service","path":"McpHostStack/McpHostService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.200.1","metadata":[]},"children":{"Service":{"id":"Service","path":"McpHostStack/McpHostService/Service/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"McpCluster0CEA2FB6"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"McpHostServiceLBPublicListenerECSGroupE0964117"},"containerName":"web","containerPort":3000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"McpClusterVpcPrivateSubnet1Subnet85846000"},{"Ref":"McpClusterVpcPrivateSubnet2Subnet608B7954"}],"securityGroups":[{"Fn::GetAtt":["McpHostServiceSecurityGroup6D76FFA5","GroupId"]}]}},"serviceName":"dev-mcp-mcp-host","taskDefinition":{"Ref":"McpHostServiceTaskDef31158B03"}}}},"SecurityGroup":{"id":"SecurityGroup","path":"McpHostStack/McpHostService/Service/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostService/Service/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"McpHostStack/McpHostService/Service/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"McpClusterVpc02532540"}}}},"from McpHostStackMcpHostServiceLBSecurityGroup3DF266C0:3000":{"id":"from McpHostStackMcpHostServiceLBSecurityGroup3DF266C0:3000","path":"McpHostStack/McpHostService/Service/SecurityGroup/from McpHostStackMcpHostServiceLBSecurityGroup3DF266C0:3000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":3000,"groupId":{"Fn::GetAtt":["McpHostServiceSecurityGroup6D76FFA5","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["McpHostServiceLBSecurityGroupB5C58556","GroupId"]},"toPort":3000}}}}}}}}},"McpHostApi":{"id":"McpHostApi","path":"McpHostStack/McpHostApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["*"],"allowMethods":["*"],"allowOrigins":["*"]},"description":"MCP Host API for Claude AI integration","name":"dev-mcp-mcp-host-api","protocolType":"HTTP"}}},"DefaultStage":{"id":"DefaultStage","path":"McpHostStack/McpHostApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"McpHostApi8D35C069"},"autoDeploy":true,"stageName":"$default"}}}}},"ANY--{proxy+}":{"id":"ANY--{proxy+}","path":"McpHostStack/McpHostApi/ANY--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.200.1","metadata":[]},"children":{"McpHostIntegration":{"id":"McpHostIntegration","path":"McpHostStack/McpHostApi/ANY--{proxy+}/McpHostIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostApi/ANY--{proxy+}/McpHostIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"McpHostApi8D35C069"},"connectionId":{"Ref":"McpHostVpcLink266D46FE"},"connectionType":"VPC_LINK","integrationMethod":"ANY","integrationType":"HTTP_PROXY","integrationUri":{"Ref":"McpHostServiceLBPublicListenerBB2BCB3A"},"payloadFormatVersion":"1.0"}}}}},"Resource":{"id":"Resource","path":"McpHostStack/McpHostApi/ANY--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"McpHostApi8D35C069"},"authorizationType":"NONE","routeKey":"ANY /{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"McpHostApiANYproxyMcpHostIntegration62F26456"}]]}}}}}}}},"McpHostVpcLink":{"id":"McpHostVpcLink","path":"McpHostStack/McpHostVpcLink","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.VpcLink","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/McpHostVpcLink/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnVpcLink","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::VpcLink","aws:cdk:cloudformation:props":{"name":"McpHostStackMcpHostVpcLink9C6E2340","securityGroupIds":[],"subnetIds":[{"Ref":"McpClusterVpcPrivateSubnet1Subnet85846000"},{"Ref":"McpClusterVpcPrivateSubnet2Subnet608B7954"}]}}}}},"ReportingLogGroup":{"id":"ReportingLogGroup","path":"McpHostStack/ReportingLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/ReportingLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/stepfunctions/dev-mcp-reporting","retentionInDays":30}}}}},"GenerateReport":{"id":"GenerateReport","path":"McpHostStack/GenerateReport","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.200.1"}},"ReportingTopic":{"id":"ReportingTopic","path":"McpHostStack/ReportingTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.TopicBase","version":"2.200.1","metadata":[]}},"NotifyReport":{"id":"NotifyReport","path":"McpHostStack/NotifyReport","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.SnsPublish","version":"2.200.1"}},"ReportingStateMachine":{"id":"ReportingStateMachine","path":"McpHostStack/ReportingStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.200.1","metadata":[]},"children":{"Role":{"id":"Role","path":"McpHostStack/ReportingStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.200.1","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"McpHostStack/ReportingStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"Resource":{"id":"Resource","path":"McpHostStack/ReportingStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"McpHostStack/ReportingStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/ReportingStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"apigatewayv2:getApi","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:apigateway:us-east-1::/apis/",{"Ref":"McpHostApi8D35C069"}]]}},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:sns:us-east-1:",{"Ref":"AWS::AccountId"},":dev-mcp-main-sns"]]}},{"Action":["logs:CreateLogDelivery","logs:DeleteLogDelivery","logs:DescribeLogGroups","logs:DescribeResourcePolicies","logs:GetLogDelivery","logs:ListLogDeliveries","logs:PutResourcePolicy","logs:UpdateLogDelivery","xray:GetSamplingRules","xray:GetSamplingTargets","xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ReportingStateMachineRoleDefaultPolicyECFA7AE6","roles":[{"Ref":"ReportingStateMachineRole09FE2AD3"}]}}}}}}},"Resource":{"id":"Resource","path":"McpHostStack/ReportingStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"GenerateReport\",\"States\":{\"GenerateReport\":{\"Next\":\"NotifyReport\",\"Type\":\"Task\",\"ResultPath\":\"$.reportData\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:apigatewayv2:getApi\",\"Parameters\":{\"ApiId\":\"",{"Ref":"McpHostApi8D35C069"},"\"}},\"NotifyReport\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::sns:publish\",\"Parameters\":{\"TopicArn\":\"arn:aws:sns:us-east-1:",{"Ref":"AWS::AccountId"},":dev-mcp-main-sns\",\"Message.$\":\"$.reportData\",\"Subject\":\"dev-mcp システム稼働状況レポート\"}}}}"]]},"loggingConfiguration":{"destinations":[{"cloudWatchLogsLogGroup":{"logGroupArn":{"Fn::GetAtt":["ReportingLogGroup2858B4B5","Arn"]}}}],"level":"ALL"},"roleArn":{"Fn::GetAtt":["ReportingStateMachineRole09FE2AD3","Arn"]},"stateMachineName":"dev-mcp-mcp-reporting","tracingConfiguration":{"enabled":true}}}},"EventsRole":{"id":"EventsRole","path":"McpHostStack/ReportingStateMachine/EventsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.200.1","metadata":[]},"children":{"ImportEventsRole":{"id":"ImportEventsRole","path":"McpHostStack/ReportingStateMachine/EventsRole/ImportEventsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.200.1","metadata":[]}},"Resource":{"id":"Resource","path":"McpHostStack/ReportingStateMachine/EventsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"McpHostStack/ReportingStateMachine/EventsRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/ReportingStateMachine/EventsRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"ReportingStateMachineB2BCC54B"}}],"Version":"2012-10-17"},"policyName":"ReportingStateMachineEventsRoleDefaultPolicy298A0EC3","roles":[{"Ref":"ReportingStateMachineEventsRoleCF990DB9"}]}}}}}}}}},"ReportingSchedule":{"id":"ReportingSchedule","path":"McpHostStack/ReportingSchedule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.200.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"McpHostStack/ReportingSchedule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.200.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Daily system metrics reporting","name":"dev-mcp-daily-reporting","scheduleExpression":"cron(0 0 * * ? *)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Ref":"ReportingStateMachineB2BCC54B"},"roleArn":{"Fn::GetAtt":["ReportingStateMachineEventsRoleCF990DB9","Arn"]}}]}}}}},"McpHostApiUrl":{"id":"McpHostApiUrl","path":"McpHostStack/McpHostApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.200.1"}},"McpServerUrl":{"id":"McpServerUrl","path":"McpHostStack/McpServerUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.200.1"}},"ReportingStateMachineArn":{"id":"ReportingStateMachineArn","path":"McpHostStack/ReportingStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.200.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"McpHostStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"McpHostStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.200.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"McpHostStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.200.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"McpHostStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.200.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}